package model.business.service;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceContextType;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

import model.business.entities.User;

@Stateless
@LocalBean
@Path("/users")
public class UserService {

	@PersistenceContext(unitName="nutrition_service", type=PersistenceContextType.TRANSACTION)
	EntityManager entityManager;
	
	@GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("isRegistered/{email}/{password}")
	public boolean isRegistered(@PathParam("email")String email, @PathParam("password")String password)
	{
		//TODO
		System.out.println("Method: isRegistered");//test
		
		try
		{
			User user = (User) entityManager.find(User.class,id);
		}
		catch(Exception e)
		{
			return false;
		}
		return true;
	}
	
	@PUT
    @Consumes(MediaType.APPLICATION_XML)
	public boolean updateProfile(User user)
	{
		System.out.println("Method: updateProfile");//test
		try
		{
			entityManager.merge(user);
		}
		catch(Exception e)
		{
			return false;
		}
		
		return true;
	}
	
	//saveData
	
	//getData
	
	@POST
    @Consumes(MediaType.APPLICATION_XML)
	public boolean registerNewUser(User user)
	{
		System.out.println("Method: registerNewUser");//test
		try
		{
			entityManager.persist(user);
		}
		catch(Exception e)
		{
			return false;
		}
		
		return true;
	}
	
}
